{% extends "base.html" %} {% block title %}About - Discord Bot{% endblock %} {%
block content %}
<div class="about-page">
  <div class="page-header">
    <h1><i class="fas fa-info-circle"></i> About Discord Bot</h1>
    <p class="subtitle">Version information, system details, and support</p>
  </div>

  <!-- Version Information Card -->
  <div class="card-grid">
    <div class="card about-card">
      <div class="card-header">
        <h3><i class="fas fa-code-branch"></i> Version Information</h3>
        <button id="refreshVersion" class="btn btn-sm btn-primary">
          <i class="fas fa-sync-alt"></i>
        </button>
      </div>
      <div class="card-body">
        <div class="version-display">
          <div class="version-icon">
            <i class="fas fa-box"></i>
          </div>
          <div class="version-details">
            <h4>Current Version</h4>
            <p class="version-number">v{{ version }}</p>
          </div>
        </div>

        <div id="updateStatus" class="update-status checking">
          <i class="fas fa-spinner fa-spin"></i> Checking for updates...
        </div>

        <div class="version-actions">
          <a
            href="https://github.com/cyb3rgh05t/discord-bot/releases"
            target="_blank"
            class="btn btn-outline"
          >
            <i class="fab fa-github"></i> View Releases
          </a>
          <a
            href="https://github.com/cyb3rgh05t/discord-bot/releases/latest"
            target="_blank"
            class="btn btn-primary"
          >
            <i class="fas fa-download"></i> Latest Release
          </a>
        </div>
      </div>
    </div>

    <!-- Bot Status Card -->
    <div class="card about-card">
      <div class="card-header">
        <h3><i class="fas fa-robot"></i> Bot Status</h3>
      </div>
      <div class="card-body">
        <div class="status-display">
          <div
            class="status-icon {% if bot_status['online'] %}online{% else %}offline{% endif %}"
          >
            <i class="fas fa-circle"></i>
          </div>
          <div class="status-details">
            <h4>{{ "Online" if bot_status['online'] else "Offline" }}</h4>
            <p>
              Bot is currently {{ "running" if bot_status['online'] else "not
              running" }}
            </p>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-box">
            <i class="fas fa-clock"></i>
            <div>
              <span class="stat-label">Uptime</span>
              <span class="stat-value">{{ bot_stats['uptime'] }}</span>
            </div>
          </div>
          <div class="stat-box">
            <i class="fas fa-signal"></i>
            <div>
              <span class="stat-label">Latency</span>
              <span class="stat-value">{{ bot_stats['latency'] }}</span>
            </div>
          </div>
          <div class="stat-box">
            <i class="fas fa-server"></i>
            <div>
              <span class="stat-label">Guilds</span>
              <span class="stat-value">{{ bot_stats['guild_count'] }}</span>
            </div>
          </div>
          <div class="stat-box">
            <i class="fas fa-users"></i>
            <div>
              <span class="stat-label">Users</span>
              <span class="stat-value">{{ bot_stats['user_count'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- System Information & Support -->
  <div class="card-grid">
    <div class="card about-card">
      <div class="card-header">
        <h3><i class="fas fa-server"></i> System Information</h3>
      </div>
      <div class="card-body">
        <div class="info-list">
          <div class="info-item">
            <i class="fas fa-desktop"></i>
            <span class="info-label">Operating System</span>
            <span class="info-value"
              >{{ system_info['os'] }} {{ system_info['os_version'] }}</span
            >
          </div>
          <div class="info-item">
            <i class="fab fa-python"></i>
            <span class="info-label">Python Version</span>
            <span class="info-value">{{ system_info['python_version'] }}</span>
          </div>
          <div class="info-item">
            <i class="fas fa-microchip"></i>
            <span class="info-label">CPU Cores</span>
            <span class="info-value">{{ system_info['cpu_count'] }}</span>
          </div>
          <div class="info-item">
            <i class="fas fa-memory"></i>
            <span class="info-label">Total Memory</span>
            <span class="info-value">{{ system_info['total_memory'] }} GB</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Support & Links Card -->
    <div class="card about-card">
      <div class="card-header">
        <h3><i class="fas fa-life-ring"></i> Support & Links</h3>
      </div>
      <div class="card-body">
        <div class="links-grid">
          <a
            href="https://github.com/cyb3rgh05t/discord-bot"
            target="_blank"
            class="link-card"
          >
            <i class="fab fa-github"></i>
            <div>
              <h5>GitHub Repository</h5>
              <p>View source code</p>
            </div>
          </a>
          <a
            href="https://github.com/cyb3rgh05t/discord-bot/issues"
            target="_blank"
            class="link-card"
          >
            <i class="fas fa-bug"></i>
            <div>
              <h5>Report Issues</h5>
              <p>Submit bug reports</p>
            </div>
          </a>
          <a
            href="https://github.com/cyb3rgh05t/discord-bot/wiki"
            target="_blank"
            class="link-card"
          >
            <i class="fas fa-book"></i>
            <div>
              <h5>Documentation</h5>
              <p>Read the docs</p>
            </div>
          </a>
          <a
            href="https://ko-fi.com/cyb3rgh05t"
            target="_blank"
            class="link-card kofi"
          >
            <i class="fas fa-heart"></i>
            <div>
              <h5>Support on Ko-fi</h5>
              <p>Buy me a coffee</p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Credits Card -->
  <div class="card about-card credits-card">
    <div class="card-header">
      <h3><i class="fas fa-code"></i> Credits & Technologies</h3>
    </div>
    <div class="card-body">
      <div class="credits-grid">
        <div class="credit-section">
          <h4><i class="fab fa-github"></i> Developer</h4>
          <a
            href="https://github.com/cyb3rgh05t"
            target="_blank"
            class="developer-link"
          >
            <i class="fas fa-user-circle"></i> cyb3rgh05t
          </a>
        </div>
        <div class="credit-section">
          <h4><i class="fas fa-code"></i> Technologies</h4>
          <div class="tech-tags">
            <span class="tech-tag"
              ><i class="fab fa-python"></i> Discord.py</span
            >
            <span class="tech-tag"><i class="fas fa-flask"></i> Flask</span>
            <span class="tech-tag"><i class="fab fa-js"></i> JavaScript</span>
            <span class="tech-tag"><i class="fas fa-database"></i> SQLite</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Check version on load
  async function checkVersion() {
    const updateStatus = document.getElementById("updateStatus");

    try {
      const response = await fetch("/api/version");
      const data = await response.json();

      if (data.error) {
        updateStatus.className = "update-status warning";
        updateStatus.innerHTML =
          '<i class="fas fa-exclamation-triangle"></i> Could not check for updates';
      } else if (data.is_update_available) {
        updateStatus.className = "update-status update-available";
        updateStatus.innerHTML = `
          <div class="update-content">
            <div>
              <i class="fas fa-exclamation-circle"></i>
              <strong>Update Available!</strong> v${data.remote} is available
            </div>
            <a href="https://github.com/cyb3rgh05t/discord-bot/releases/latest" target="_blank" class="btn btn-sm btn-warning">
              <i class="fas fa-download"></i> Update Now
            </a>
          </div>
        `;
      } else {
        updateStatus.className = "update-status up-to-date";
        updateStatus.innerHTML =
          '<i class="fas fa-check-circle"></i> You are running the latest version';
      }
    } catch (error) {
      updateStatus.className = "update-status error";
      updateStatus.innerHTML =
        '<i class="fas fa-times-circle"></i> Error checking for updates';
    }
  }

  // Refresh button
  document
    .getElementById("refreshVersion")
    .addEventListener("click", function () {
      const icon = this.querySelector("i");
      const updateStatus = document.getElementById("updateStatus");

      icon.classList.add("fa-spin");
      updateStatus.className = "update-status checking";
      updateStatus.innerHTML =
        '<i class="fas fa-spinner fa-spin"></i> Checking for updates...';

      checkVersion().finally(() => {
        setTimeout(() => {
          icon.classList.remove("fa-spin");
        }, 500);
      });
    });

  // Check on page load
  checkVersion();
</script>
{% endblock %}
