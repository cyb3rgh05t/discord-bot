{% extends "base.html" %} {% block title %}Dashboard - Discord Bot Manager{%
endblock %} {% block content %}
<div class="dashboard">
  <div class="page-header">
    <h1>
      <i class="fas fa-tachometer-alt"></i>
      Dashboard
    </h1>
    <p class="subtitle">Comprehensive overview of your Discord bot</p>
  </div>

  <!-- Bot Status Overview -->
  <div class="status-banner">
    <div class="status-main">
      <div class="status-indicator-wrapper">
        <div class="status-indicator">
          <span
            class="status-dot {% if bot_status.online %}online{% else %}offline{% endif %}"
          ></span>
          <h2
            class="{% if bot_status.online %}status-online{% else %}status-offline{% endif %}"
          >
            {{ bot_status.name }}
          </h2>
        </div>
      </div>
      <div class="status-details">
        <div class="status-item">
          <i class="fas fa-clock"></i>
          <span class="label">Uptime</span>
          <span class="value">{{ bot_status.uptime }}</span>
        </div>
        <div class="status-item">
          <i class="fas fa-signal"></i>
          <span class="label">Latency</span>
          <span class="value">{{ bot_status.latency }}ms</span>
        </div>
        <div class="status-item">
          <i class="fas fa-server"></i>
          <span class="label">Guilds</span>
          <span class="value">{{ bot_status.guilds }}</span>
        </div>
        <div class="status-item">
          <i class="fas fa-users"></i>
          <span class="label">Members</span>
          <span class="value">{{ bot_status.users }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats Grid -->
  <div class="quick-stats">
    <div class="stat-card">
      <div class="stat-icon channels-icon">
        <i class="fas fa-hashtag"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ bot_stats.channels }}</div>
        <div class="stat-label">Channels</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon roles-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ bot_stats.roles }}</div>
        <div class="stat-label">Roles</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon commands-icon">
        <i class="fas fa-terminal"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ bot_stats.commands }}</div>
        <div class="stat-label">Commands</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon services-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">
          {{ services_running }}/{{ services|length }}
        </div>
        <div class="stat-label">Services Running</div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="dashboard-grid">
    <!-- Tickets Overview -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-ticket-alt"></i> Support Tickets</h3>
        <a href="{{ url_for('tickets.index') }}" class="btn btn-sm btn-outline">
          View All <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-body">
        <div class="mini-stats">
          <div class="mini-stat">
            <div class="mini-stat-icon open-icon">
              <i class="fas fa-ticket-alt"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ ticket_stats.open }}</div>
              <div class="mini-stat-label">Open</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon closed-icon">
              <i class="fas fa-check"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ ticket_stats.closed }}</div>
              <div class="mini-stat-label">Closed</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon total-icon">
              <i class="fas fa-list"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ ticket_stats.total }}</div>
              <div class="mini-stat-label">Total</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Invites Overview -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-user-plus"></i> Plex Invites</h3>
        <a href="{{ url_for('invites.index') }}" class="btn btn-sm btn-outline">
          View All <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-body">
        <div class="mini-stats">
          <div class="mini-stat">
            <div class="mini-stat-icon active-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ invite_stats.active }}</div>
              <div class="mini-stat-label">Active</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon expired-icon">
              <i class="fas fa-times-circle"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ invite_stats.expired }}</div>
              <div class="mini-stat-label">Expired</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon total-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ invite_stats.total }}</div>
              <div class="mini-stat-label">Total</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Database Overview -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-database"></i> Databases</h3>
        <a
          href="{{ url_for('databases.index') }}"
          class="btn btn-sm btn-outline"
        >
          Browse <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-body">
        <div class="mini-stats">
          <div class="mini-stat">
            <div class="mini-stat-icon db-icon">
              <i class="fas fa-database"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ db_stats.databases }}</div>
              <div class="mini-stat-label">Databases</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon table-icon">
              <i class="fas fa-table"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">{{ db_stats.tables }}</div>
              <div class="mini-stat-label">Tables</div>
            </div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-icon records-icon">
              <i class="fas fa-list-ol"></i>
            </div>
            <div class="mini-stat-content">
              <div class="mini-stat-value">
                {{ "{:,}".format(db_stats.records) }}
              </div>
              <div class="mini-stat-label">Records</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- System Resources -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-microchip"></i> System Resources</h3>
        <a
          href="{{ url_for('services.index') }}"
          class="btn btn-sm btn-outline"
        >
          Details <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-body">
        <div class="resource-bars">
          <div class="resource-item">
            <div class="resource-header">
              <span class="resource-label">
                <i class="fas fa-microchip"></i> CPU
              </span>
              <span class="resource-value"
                >{{ "%.1f"|format(resources.cpu.percent) }}%</span
              >
            </div>
            <div class="progress-bar">
              <div
                class="progress-fill {% if resources.cpu.percent > 80 %}danger{% elif resources.cpu.percent > 60 %}warning{% else %}success{% endif %}"
                style="width: {{ resources.cpu.percent }}%"
              ></div>
            </div>
          </div>
          <div class="resource-item">
            <div class="resource-header">
              <span class="resource-label">
                <i class="fas fa-memory"></i> Memory
              </span>
              <span class="resource-value"
                >{{ "%.1f"|format(resources.memory.percent) }}%</span
              >
            </div>
            <div class="progress-bar">
              <div
                class="progress-fill {% if resources.memory.percent > 80 %}danger{% elif resources.memory.percent > 60 %}warning{% else %}success{% endif %}"
                style="width: {{ resources.memory.percent }}%"
              ></div>
            </div>
          </div>
          <div class="resource-item">
            <div class="resource-header">
              <span class="resource-label">
                <i class="fas fa-hdd"></i> Disk
              </span>
              <span class="resource-value"
                >{{ "%.1f"|format(resources.disk.percent) }}%</span
              >
            </div>
            <div class="progress-bar">
              <div
                class="progress-fill {% if resources.disk.percent > 80 %}danger{% elif resources.disk.percent > 60 %}warning{% else %}success{% endif %}"
                style="width: {{ resources.disk.percent }}%"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Services Status -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-tasks"></i> Services</h3>
        <a
          href="{{ url_for('services.index') }}"
          class="btn btn-sm btn-outline"
        >
          Monitor <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-body">
        <div class="services-list">
          {% for service in services %}
          <div class="service-item">
            <div class="service-name">
              <i class="fas {{ service.icon }}"></i>
              {{ service.name }}
            </div>
            <div class="service-status {{ service.status }}">
              <span class="status-dot"></span>
              {{ service.status|capitalize }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
      </div>
      <div class="card-body">
        <div class="action-grid">
          <a href="{{ url_for('members.index') }}" class="action-btn">
            <i class="fas fa-users"></i>
            <span>Members</span>
          </a>
          <a href="{{ url_for('commands.index') }}" class="action-btn">
            <i class="fas fa-terminal"></i>
            <span>Commands</span>
          </a>
          <a href="{{ url_for('guild_stats.index') }}" class="action-btn">
            <i class="fas fa-chart-bar"></i>
            <span>Guild Stats</span>
          </a>
          <a href="{{ url_for('settings.index') }}" class="action-btn">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_scripts %}
<style>
  .dashboard {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Status Banner */
  .status-banner {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
  }

  .status-main {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .status-indicator-wrapper {
    display: flex;
    justify-content: center;
  }

  .status-indicator {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .status-indicator h2 {
    margin: 0;
    font-size: 2rem;
    font-weight: 700;
  }

  .status-online {
    color: #38ef7d;
  }

  .status-offline {
    color: #f04747;
  }

  .status-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .status-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-color);
    border-radius: 8px;
  }

  .status-item i {
    color: var(--link-color);
    font-size: 1.5rem;
  }

  .status-item .label {
    color: var(--text-muted);
    font-size: 0.875rem;
    margin-right: auto;
  }

  .status-item .value {
    color: var(--text-color);
    font-weight: 600;
    font-size: 1.1rem;
  }

  /* Quick Stats */
  .quick-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .stat-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
  }

  .stat-icon.channels-icon {
    background: #667eea;
  }

  .stat-icon.roles-icon {
    background: #f5576c;
  }

  .stat-icon.commands-icon {
    background: #faa61a;
  }

  .stat-icon.services-icon {
    background: #38ef7d;
  }

  .stat-info {
    flex: 1;
  }

  .stat-value {
    font-size: 2rem;
    font-weight: 600;
    color: var(--text-color);
    line-height: 1;
  }

  .stat-label {
    color: var(--text-muted);
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  /* Dashboard Grid */
  .dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
  }

  /* Mini Stats */
  .mini-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }

  .mini-stat {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-color);
    border-radius: 6px;
  }

  .mini-stat-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1rem;
  }

  .mini-stat-icon.open-icon {
    background: #38ef7d;
  }

  .mini-stat-icon.closed-icon {
    background: #8b949e;
  }

  .mini-stat-icon.active-icon {
    background: #38ef7d;
  }

  .mini-stat-icon.expired-icon {
    background: #f04747;
  }

  .mini-stat-icon.total-icon {
    background: #667eea;
  }

  .mini-stat-icon.db-icon {
    background: #667eea;
  }

  .mini-stat-icon.table-icon {
    background: #38ef7d;
  }

  .mini-stat-icon.records-icon {
    background: #faa61a;
  }

  .mini-stat-content {
    flex: 1;
  }

  .mini-stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-color);
    line-height: 1;
  }

  .mini-stat-label {
    color: var(--text-muted);
    font-size: 0.75rem;
    margin-top: 0.25rem;
  }

  /* Resource Bars */
  .resource-bars {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .resource-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .resource-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .resource-label {
    color: var(--text-color);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .resource-label i {
    color: var(--link-color);
  }

  .resource-value {
    color: var(--text-color);
    font-weight: 600;
  }

  .progress-bar {
    height: 8px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
  }

  .progress-fill.success {
    background: #38ef7d;
  }

  .progress-fill.warning {
    background: #faa61a;
  }

  .progress-fill.danger {
    background: #f04747;
  }

  /* Services List */
  .services-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .service-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-color);
    border-radius: 6px;
  }

  .service-name {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-color);
    font-weight: 500;
  }

  .service-name i {
    color: var(--link-color);
  }

  .service-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .service-status.running {
    color: #38ef7d;
  }

  .service-status.stopped {
    color: #f04747;
  }

  .service-status .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .service-status.running .status-dot {
    background: #38ef7d;
    box-shadow: 0 0 8px rgba(56, 239, 125, 0.5);
  }

  .service-status.stopped .status-dot {
    background: #f04747;
  }

  /* Action Grid */
  .action-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1.25rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-color);
    text-decoration: none;
    transition: all 0.2s;
  }

  .action-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--link-color);
    color: var(--text-color);
    transform: translateY(-2px);
  }

  .action-btn i {
    font-size: 1.5rem;
    color: var(--link-color);
  }

  .action-btn span {
    font-size: 0.875rem;
    font-weight: 500;
  }

  /* Status Dot */
  .status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }

  .status-dot.online {
    background: #38ef7d;
    box-shadow: 0 0 10px rgba(56, 239, 125, 0.6);
    animation: pulse 2s infinite;
  }

  .status-dot.offline {
    background: #f04747;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .status-details {
      grid-template-columns: 1fr;
    }

    .quick-stats {
      grid-template-columns: 1fr;
    }

    .dashboard-grid {
      grid-template-columns: 1fr;
    }

    .mini-stats {
      grid-template-columns: 1fr;
    }

    .action-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %}
